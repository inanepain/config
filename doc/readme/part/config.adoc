= Config

The `Inane\\Config\\Config` class is a small helper built on top of `Inane\\Stdlib\\Options`.
It is used to:

* load configuration from a base config file
* merge additional config files (via a `glob_pattern`)
* (optionally) lock the configuration to prevent further modifications
* provide a convention for *component/class specific* configuration via `getConfig()`

The public API is intentionally small:

* `Config::fromConfigFile()` loads/merges/locks
* `Config::getConfig()` returns a configuration subset for a specific class

== Loading configuration from files

The default entry point is `Config::fromConfigFile()`:

[source,php]
----
use Inane\Config\Config;

$config = Config::fromConfigFile();
----

By default it looks for `config/app.config.php`.

The base config file is expected to return an array (or something compatible with `Options`), e.g.:

[source,php]
----
// config/app.config.php

return [
    // the default key inspected by Config::fromConfigFile()
    'config' => [
        // Optional: extra files to merge in (glob brace patterns supported)
        'glob_pattern'        => 'config/autoload/{{,*.}global,{,*.}local}.php',

        // Optional: prevent modifications after initial loading
        'allow_modifications' => false,
    ],

    // application config (example)
    'appId'    => 'inane-fw',
    'services' => [
        // ...
    ],
];
----

If `glob_pattern` is set and matches files, each matching file is included and merged into the main config.

=== Config file merge order

The default `glob_pattern` merges `\*.global.php` before `\*.local.php` allowing for default configurations to be overridden with local ones. It is recommended to have a `.gitignore` file in the autoload directory to ignore `\*.local.php` in your commits.

..gitignore for autoload directory
[source,git]
----
local.php
*.local.php
----

== Locking and modifications

If `allow_modifications` is `false` (the default), `Config::fromConfigFile()` locks the configuration after loading/merging.
This is a convenience to ensure your configuration is treated as immutable during runtime.

If you need a mutable config instance (for tests or dynamic environments), set:

[source,php]
----
return [
    'config' => [
        'allow_modifications' => true,
    ],
];
----

== Component / class-specific configuration

`Config::getConfig(string $class)` is a convention for retrieving configuration scoped to a specific class.

By default, it looks under the `components` key and then under the given class name:

[source,php]
----
use Inane\Config\Config;

/** @var Config $config */
$serviceManagerConfig = $config->getConfig(Inane\Services\ServiceManager::class);
----

That means your config can be structured like this:

[source,php]
----
return [
    'components' => [
        Inane\Services\ServiceManager::class => [
            'cache' => true,
            'debug' => false,
        ],
    ],
];
----

NOTE: `getConfig()` returns `null` when no matching config is found.
If you rely on class-specific config injection (see `ConfigAware` below), ensure the config entry exists for that class, or use global injection instead.
